[pytest]
# 1. 指定测试文件/目录的匹配规则
python_files = test_*.py *_test.py
python_classes = Test* *Test
python_functions = test_* *_test

# 2. 默认命令行参数（每次运行自动添加）
addopts =
    -v --color=yes
    --html=reports/report.html
    --self-contained-html
    --capture=sys -v

# 3. 标记注册（避免未注册标记的警告）
markers =
    add: test calculate add
    subtract: test calculate subtract
    smoke: smoke test suite

# 4. 测试路径设置
testpaths = tests/

# 5. 日志配置
log_cli = true
log_level = INFO
log_format = %(asctime)s [%(levelname)s] %(message)s
log_date_format = %Y-%m-%d %H:%M:%S

# 6. 缓存目录配置
cache_dir = .pytest_cache

# 7. 忽略特定路径
norecursedirs = .* node_modules dist build

# 8. 自定义配置项
my_custom_setting = 42

# 9. 解决乱码问题
[metadata]
encoding = utf-8
language = zh-CN
console_output_encoding = utf-8